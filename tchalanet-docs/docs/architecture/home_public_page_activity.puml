@startuml
title Activité - Home Public (via BFF)

start
:Détecter langue & contexte;

:GET BFF /api/v1/page/home-public;

partition "Backend for Frontend (BFF)" {
  fork
    :GET /configs/home?ctx=default;
  fork again
    :GET /configs/i18n/default;
  fork again
    :GET /rules?ctx=default;
  end fork

  :Évaluer les règles;
  -> Widgets/sections filtrés;

  :Charger données publiques pour widgets visibles (ex: news, loteries);

  :Agréger en une réponse JSON unique;
}

:Réponse unique (layout, theme, data, i18n);

fork
  :Charger assets (images, logos) via Asset CDN;
fork again
  :Préparer ViewModel pour rendu;
end fork

:Render Home Page;

stop
@enduml
